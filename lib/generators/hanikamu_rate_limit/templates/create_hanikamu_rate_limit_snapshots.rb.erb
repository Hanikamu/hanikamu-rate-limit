# frozen_string_literal: true

class CreateHanikamuRateLimitSnapshots < ActiveRecord::Migration[<%= ActiveRecord::Migration.current_version %>]
  def change
    create_table :hanikamu_rate_limit_snapshots do |t|
      t.string  :registry_name, null: false
      t.integer :rate,          null: false
      t.integer :min_rate
      t.integer :max_rate
      t.boolean :cooldown_active, default: false

      t.timestamps
    end

    add_index :hanikamu_rate_limit_snapshots, %i[registry_name created_at],
              name: "idx_rl_snapshots_registry_time"
  end
end
